[gd_scene load_steps=17 format=2]

[ext_resource path="res://assets/br/BackRessource.png" type="Texture" id=1]
[ext_resource path="res://assets/br/BackItem.png" type="Texture" id=2]
[ext_resource path="res://default_env.tres" type="Environment" id=3]
[ext_resource path="res://InGame/Table/table.tscn" type="PackedScene" id=4]
[ext_resource path="res://Systems/Spawner/spawnpanel.tscn" type="PackedScene" id=5]
[ext_resource path="res://InGame/Table/table_mat_rug3.tres" type="Material" id=6]
[ext_resource path="res://Systems/networking/state_manager.gd" type="Script" id=7]
[ext_resource path="res://Systems/Controls/player.tscn" type="PackedScene" id=8]
[ext_resource path="res://Systems/Small/SmallScript/vbt.gd" type="Script" id=9]
[ext_resource path="res://Systems/MainMenu/Main.gd" type="Script" id=11]
[ext_resource path="res://Theme/GREEN_theme.tres" type="Theme" id=13]

[sub_resource type="GIProbeData" id=6]
bounds = AABB( -200, -11, -200, 400, 22, 400 )
cell_size = 3.125
to_cell_xform = Transform( 0.32, 0, 0, 0, 0.32, 0, 0, 0, 0.32, 64, 3.52, 64 )
dynamic_data = PoolIntArray( 0, 8, 128, 8, 128, 1, 0, 0, 1101004800, 1086324736, 1065353216, 0, 1101004800, 1101004800, 1065353216, 1065353216, -1, -1, -1, -1, -1, -1, -1, -1, 0, 0, 8355711, 0 )
dynamic_range = 4
energy = 1.47
bias = 3.538
normal_bias = 0.0
propagation = 0.7

[sub_resource type="CubeMesh" id=2]
size = Vector3( 1, 1, 1 )

[sub_resource type="CubeMesh" id=3]
size = Vector3( 1, 1, 1 )

[sub_resource type="SpatialMaterial" id=4]

[sub_resource type="CubeMesh" id=5]
size = Vector3( 1, 1, 1 )

[node name="Main" type="Spatial"]
script = ExtResource( 11 )
positions = [ NodePath("positions/p1"), NodePath("positions/p2"), NodePath("positions/p3"), NodePath("positions/p4") ]

[node name="state_manager" type="Spatial" parent="."]
script = ExtResource( 7 )

[node name="Tween" type="Tween" parent="state_manager"]

[node name="player" parent="." instance=ExtResource( 8 )]

[node name="CAM" parent="player" index="2"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 2 )

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="SpawnPanel" parent="CanvasLayer" instance=ExtResource( 5 )]
visible = false

[node name="vbt" type="VBoxContainer" parent="CanvasLayer"]
margin_right = 87.0
margin_bottom = 300.0
theme = ExtResource( 13 )
script = ExtResource( 9 )

[node name="b_rcm" type="ToolButton" parent="CanvasLayer/vbt"]
margin_right = 87.0
margin_bottom = 50.0
rect_min_size = Vector2( 0, 50 )
focus_mode = 0
toggle_mode = true
text = "RCM"

[node name="b_r" type="ToolButton" parent="CanvasLayer/vbt"]
margin_top = 54.0
margin_right = 87.0
margin_bottom = 104.0
rect_min_size = Vector2( 0, 50 )
toggle_mode = true
text = "Rotate"

[node name="b_s" type="ToolButton" parent="CanvasLayer/vbt"]
margin_top = 108.0
margin_right = 87.0
margin_bottom = 158.0
rect_min_size = Vector2( 0, 50 )
toggle_mode = true
text = "Shift"

[node name="environment" type="Spatial" parent="."]

[node name="DirectionalLight" type="DirectionalLight" parent="environment"]
transform = Transform( -0.990024, 1.11684e-07, 0.140901, 0.11269, 0.600294, 0.7918, -0.084582, 0.799779, -0.594305, -2, 11.0713, -9.56406 )
light_energy = 1.63
light_specular = 1.388
shadow_enabled = true
directional_shadow_max_distance = 150.0

[node name="DirectionalLight2" type="DirectionalLight" parent="environment"]
transform = Transform( -0.786354, 0.264956, -0.558073, -0.603107, -0.524938, 0.600585, -0.133825, 0.80885, 0.572584, 3.84951, 11.0713, -9.56406 )
visible = false
light_specular = 0.0
shadow_color = Color( 0.419608, 0.419608, 0.419608, 1 )
directional_shadow_max_distance = 150.0

[node name="WorldEnvironment" type="WorldEnvironment" parent="environment"]
environment = ExtResource( 3 )

[node name="GIProbe" type="GIProbe" parent="environment"]
visible = false
extents = Vector3( 200, 11, 200 )
energy = 1.47
bias = 3.538
data = SubResource( 6 )

[node name="tablo" type="Spatial" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0 )

[node name="metercube" type="MeshInstance" parent="tablo"]
transform = Transform( 0.981903, 0, 0.189387, 0, 1, 0, -0.189387, 0, 0.981903, -0.0764465, 1, -10 )
visible = false
mesh = SubResource( 2 )

[node name="metercube2" type="MeshInstance" parent="tablo"]
transform = Transform( 0.980109, 0, 0.198461, 0, 1, 0, -0.198461, 0, 0.980109, -6.529, 0.99, -5.614 )
visible = false
mesh = SubResource( 3 )
material/0 = SubResource( 4 )

[node name="metercube3" type="MeshInstance" parent="tablo"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2.48118, 0.99, -8.31099 )
visible = false
mesh = SubResource( 5 )

[node name="table" parent="tablo" instance=ExtResource( 4 )]

[node name="tableMesh" parent="tablo/table" index="1"]
material/0 = ExtResource( 6 )

[node name="cardDispenser0" type="Sprite3D" parent="tablo"]
transform = Transform( 0.1, 0, 0, 0, -4.37114e-09, 1, 0, -0.1, -4.37114e-08, -3.174, 0.55, 2.603 )
visible = false
texture = ExtResource( 2 )

[node name="cardDispenser1" type="Sprite3D" parent="tablo"]
transform = Transform( 0.1, 0, 0, 0, -4.37114e-09, 1, 0, -0.1, -4.37114e-08, 3.226, 0.55, -2.697 )
visible = false
texture = ExtResource( 1 )

[node name="positions" type="Spatial" parent="."]
visible = false

[node name="p1" type="Spatial" parent="positions"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9 )

[node name="hand" type="Position3D" parent="positions/p1"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.2, -2 )

[node name="p2" type="Spatial" parent="positions"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 10, 0, 0 )

[node name="hand" type="Position3D" parent="positions/p2"]
transform = Transform( -4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -2, 0.2, 0 )

[node name="p3" type="Spatial" parent="positions"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -10 )

[node name="hand" type="Position3D" parent="positions/p3"]
transform = Transform( -1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0.2, 2 )

[node name="p4" type="Spatial" parent="positions"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 0, 0 )

[node name="hand" type="Position3D" parent="positions/p4"]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 2, 0.2, 0 )

[node name="ResourceSpawn" type="Position3D" parent="positions"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0 )

[node name="others" type="Spatial" parent="."]

[node name="cards" type="Spatial" parent="."]

[connection signal="toggled" from="CanvasLayer/vbt/b_rcm" to="CanvasLayer/vbt" method="_on_b_rcm_toggled"]
[connection signal="toggled" from="CanvasLayer/vbt/b_r" to="CanvasLayer/vbt" method="_on_b_r_toggled"]
[connection signal="toggled" from="CanvasLayer/vbt/b_s" to="CanvasLayer/vbt" method="_on_b_s_toggled"]

[editable path="player"]
[editable path="player/CAM/position/elevation/zoom/Camera/closeup"]
[editable path="tablo/table"]
